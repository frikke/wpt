<svg xmlns="http://www.w3.org/2000/svg" xmlns:h="http://www.w3.org/1999/xhtml" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200" class="reftest-wait" viewBox="0 0 4 4"><metadata><title>modifying xlink:href on an SVG image</title><h:link href="reference/green-rect-100x100.svg" rel="match"/></metadata><script href="/common/reftest-wait.js"/><script href="/common/rendering-utils.js"/><image width="2" height="2" onload="test()" xlink:href="data:image/svg+xml,&lt;svg xmlns='http://www.w3.org/2000/svg' width='50' height='50' &gt;&lt;rect width='50' height='50' fill='red'/&gt;&lt;/svg&gt;"/><script>const XLINK_NS = &quot;http://www.w3.org/1999/xlink&quot;; const GREEN_DATA_URI = &quot;data:image/svg+xml,&lt;svg xmlns=&apos;http://www.w3.org/2000/svg&apos; width=&apos;50&apos; height=&apos;50&apos; &gt;&lt;rect width=&apos;50&apos; height=&apos;50&apos; fill=&apos;green&apos;/&gt;&lt;/svg&gt;&quot;; // Our &apos;image&apos; elem fires its load event more than once: first for the // initial data-URI, and then again after our dynamic mutation adjusts it. // But we only want test() to run for the first load, so we use // &apos;didStartTest&apos; to nerf any invocations after the first. let didStartTest = false; async function test() { if (didStartTest) { return; } didStartTest = true; await waitForAtLeastOneFrame(); document.querySelector(&apos;image&apos;).setAttributeNS(XLINK_NS, &apos;href&apos;, GREEN_DATA_URI); await waitForAtLeastOneFrame(); takeScreenshot(); }</script></svg>